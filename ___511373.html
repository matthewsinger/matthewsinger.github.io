<!doctype HTML>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ["$","$"], ["\\(","\\)"] ],
    displayMath: [ ["$$","$$"], 
                   ["\\[","\\]"], 
                   ["\\begin{equation}","\\end{equation}"], 
                   ["\\begin{equation*}","\\end{equation*}"] ],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|JavaHighlightBlock|JavaHighlight"
  },
  "HTML-CSS": {
    availableFonts: [],
    webFont: "Asana-Math",
    preferredFont: "Asana-Math",
    imageFont: null,
    mtexFontInherit: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="codemirror.js"></script>
<script src="python.js"></script>
<script src="runmode.js"></script>
<script src="setup-page.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title></title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Commonwealth School CS2
<br/>
Introduction to Class-<wbr></wbr>based Program Design</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="General_Course_Information.html" class="tocviewlink" data-pltdoc="x">General Course Information</a></td></tr><tr><td align="right"></td><td><a href="Assignments.html" class="tocviewselflink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right"></td><td><a href="Documentation.html" class="tocviewlink" data-pltdoc="x">Documentation</a></td></tr><tr><td align="right"></td><td><a href="Installation___New_Project_Instructions.html" class="tocviewlink" data-pltdoc="x">Installation &amp; New Project Instructions</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="Assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="assignment1.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 1:</span> Designing complex data</a></td></tr><tr><td align="right"></td><td><a href="assignment2.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 2:</span> Delegation</a></td></tr><tr><td align="right"></td><td><a href="assignment3.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 3:</span> Tree-<wbr></wbr>Shaped Data</a></td></tr><tr><td align="right"></td><td><a href="assignment4.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 4:</span> Accumulators</a></td></tr><tr><td align="right"></td><td><a href="assignment5.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 5:</span> Abstracting over Data Definitions</a></td></tr><tr><td align="right"></td><td><a href="assignment6.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 6:</span> Customizing Constructors</a></td></tr><tr><td align="right"></td><td><a href="assignment7.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 7:</span> Mastermind</a></td></tr><tr><td align="right"></td><td><a href="assignment8.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 8:</span> Abstraction</a></td></tr><tr><td align="right"></td><td><a href="assignment9.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 9:</span> Generics</a></td></tr><tr><td align="right"></td><td><a href="assignment10.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 10:</span> Fibonacci</a></td></tr><tr><td align="right"></td><td><a href="assignment11.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 11:</span> Course Registration</a></td></tr><tr><td align="right"></td><td><a href="assignment12.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 12:</span> Who&rsquo;s On Deque?</a></td></tr><tr><td align="right"></td><td><a href="assignment13.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 13:</span> Huffman Coding</a></td></tr><tr><td align="right"></td><td><a href="assignment14.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 14:</span> Traversal</a></td></tr><tr><td align="right"></td><td><a href="assignment15.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 15:</span> Arrays</a></td></tr><tr><td align="right"></td><td><a href="assignment16.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 16:</span> Bloom Filters</a></td></tr><tr><td align="right"></td><td><a href="assignment17.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 17:</span> Optionals</a></td></tr><tr><td align="right"></td><td><a href="assignment18.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 18:</span> Streams</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">???</a></td></tr><tr><td align="right"></td><td><a href="assignment19.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 19:</span> Chess</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">???</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="#%28part._.Minesweeper%29" class="tocviewlink" data-pltdoc="x">Minesweeper</a></td></tr><tr><td align="right">19.1&nbsp;</td><td><a href="#%28part._.Part_1%29" class="tocviewlink" data-pltdoc="x">Part 1</a></td></tr><tr><td align="right">19.2&nbsp;</td><td><a href="#%28part._.Part_2%29" class="tocviewlink" data-pltdoc="x">Part 2</a></td></tr><tr><td align="right">19.3&nbsp;</td><td><a href="#%28part._.Part_3%29" class="tocviewlink" data-pltdoc="x">Part 3</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Minesweeper%29" class="tocsubseclink" data-pltdoc="x">Minesweeper</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Prerequisites%29" class="tocsubseclink" data-pltdoc="x">Prerequisites</a></td></tr><tr><td><span class="tocsublinknumber">19.1<tt>&nbsp;</tt></span><a href="#%28part._.Part_1%29" class="tocsubseclink" data-pltdoc="x">Part 1</a></td></tr><tr><td><span class="tocsublinknumber">19.2<tt>&nbsp;</tt></span><a href="#%28part._.Part_2%29" class="tocsubseclink" data-pltdoc="x">Part 2</a></td></tr><tr><td><span class="tocsublinknumber">19.3<tt>&nbsp;</tt></span><a href="#%28part._.Part_3%29" class="tocsubseclink" data-pltdoc="x">Part 3</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Extra_credit%29" class="tocsubseclink" data-pltdoc="x">Extra credit</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.2</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="assignment18.html" title="backward to &quot;Assignment 18: Streams&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="assignment19.html" title="forward to &quot;Assignment 19: Chess&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4><a name="(part._(gentag._0))"></a></h4><p><span style="font-weight: bold">Goals:</span> Design a game with mutable world state, <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">ArrayList</span><span class="RktMeta"></span></span></span>s, mutable linked data structures,
and loops.</p><h5><a name="(part._.Minesweeper)"></a>Minesweeper</h5><p>For this project, you will be implementing the famous time-wasting game known
since the 1960s, and popularized by Microsoft Windows 3.1,
<a href="http://minesweeperonline.com/">Minesweeper</a>.  The game consists of
a two-dimensional grid of cells, with each cell possibly containing a hidden
mine.  The player can reveal what&rsquo;s in a cell by clicking on it; there are
three possibilities.  First and most importantly, if it contains a mine, the
player loses.  Second, if the cell is empty but adjacent to some mines, the
revealed cell shows a number indicating how many of its neighboring
cells contain a mine.</p><p>Finally, if the revealed cell is both empty and has no neighbors with a mine,
then instead of showing a zero, all of its neighbors are revealed, as well.
This should cause a cascading &ldquo;flood-fill&rdquo; effect where an entire region of
connected cells without mines is uncovered (play the game at the above
link to see this in action).  The flood-fill should stop when it reaches a cell
with a non-zero neighboring mine count.</p><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Obviously in the real game, you wouldn&rsquo;t draw mines on tiles that
haven&rsquo;t been revealed, since that would defeat the whole game!  This image is
just for demonstration purposes only.  In these images, &ldquo;hidden&rdquo; cells are
drawn light-blue, and &ldquo;revealed&rdquo; cells are drawn in gray.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">For example, say the grid has mines in the following positions:</div></p><p><img src="mine-locations.png" alt="" width="299" height="300"/></p><p>If the player clicks the cell in the top-right corner, the cell shows the
number of adjacent mines (in this case, 1):</p><p><img src="revealed-cell.png" alt="" width="299" height="300"/></p><p>On the other hand, the cell in the lower-right corner has no adjacent mines. If
the player clicked that cell instead, this would trigger the flood-fill
behaivor, instantly spreading out and revealing all neighboring cels,
stopping at cells that have adjacent mines:</p><p><img src="flood-fill.png" alt="" width="301" height="301"/></p><p>(Animating the flood-fill effect is an extra credit option and not required.)</p><p>In that screenshot, it&rsquo;s obvious that there must be two mines in the middle of
the bottom row. A player can indicate the location of a suspected mine by
right-clicking a cell to place a flag on it (here shown as an orange triangle on
the right-most cell):</p><p><img src="flagged-cell.png" alt="" width="299" height="299"/></p><p>The player&rsquo;s goal is to identify where all of the mines are by uncovering all of
the cells <span class="emph">except</span> the ones that contain mines. (The mines do not need to
be flagged; they&rsquo;re only for the player&rsquo;s convenience.)</p><h5><a name="(part._.Prerequisites)"></a>Prerequisites</h5><p><div class="SIntrapara">You will be using the Impworld library &#8212;<wbr></wbr> make sure that at the top of your file, you include
</div><div class="SIntrapara"><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjKeyword">import</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">java</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">util</span><span class="ProfjDefault">.</span><span class="ProfjType">ArrayList</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="ProfjKeyword">import</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">tester</span><span class="ProfjDefault">.</span><span class="ProfjKeyword">*</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="ProfjKeyword">import</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">javalib</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">impworld</span><span class="ProfjDefault">.</span><span class="ProfjKeyword">*</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="ProfjKeyword">import</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">java</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">awt</span><span class="ProfjDefault">.</span><span class="ProfjType">Color</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="ProfjKeyword">import</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">javalib</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">worldimages</span><span class="ProfjDefault">.</span><span class="ProfjKeyword">*</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></p><h5>19.1<tt>&nbsp;</tt><a name="(part._.Part_1)"></a>Part 1</h5><p>For the first part of the assignment, design the representation of the game.</p><ul><li><p>Design classes for the game, cells, and any other parts of the game you
might need to represent. The game linked above uses a 30x16 grid with 99
mines, but both the grid size and number of mines should be easy to change
in your solution. You might want to start with a smaller grid and/or a lower
density of mines to make the game easier to win.</p></li><li><p>Core to the game&rsquo;s functionality is a cell knowing where its neighbors are and
and identifying how many of them have a mine. You can either link cells to each other
in your data representation directly or write helper methods that given a cell will produce
a list of its neighbors.</p></li><li><p>Generate the random placement of mines using a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Random</span><span class="RktMeta"></span></span></span> object.
You can supply a specific, seeded <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Random</span><span class="RktMeta"></span></span></span> object in your game&rsquo;s
constructor for use in testing, or you can leave it unspecified for actual
play.  <span style="font-weight: bold">Hint</span>: Using a counted-for loop to loop exactly \(N\)
times generate \(N\) random coordinates is not sufficient, because you
might end up generating the same coordinate twice: you need to produce
\(N\) distinct mines.  There are at least two acceptable solutions to
this problem.  One simple solution is to use a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjKeyword">while</span><span class="RktMeta"></span></span></span> loop and keep
looping until you have \(N\) distinct mines.  This works, but it tends
to slow down enormously as the board fills up (imagine using this approach
to find a location for the 99th mine on a board with only 100 cells). There
is a cleverer second solution that has guaranteed good performance: keep track
of which cells are currently unmined, and always randomly pick from them.</p></li><li><p>Implement a method to count the number of mines neighboring a
particular cell.  This will likely be simplified by having some simple way
to iterate over all the neighbors of a cell.</p></li><li><p>Implement the methods to draw the game board.</p></li></ul><h5>19.2<tt>&nbsp;</tt><a name="(part._.Part_2)"></a>Part 2</h5><ul><li><p>Implement the methods to draw the game board.</p></li></ul><h5>19.3<tt>&nbsp;</tt><a name="(part._.Part_3)"></a>Part 3</h5><p>For this part of the assignment, finish implementing the game. That means:</p><ul><li><p>Implement left-mouse-click handling to reveal cells, including the
flood-fill effect for cells with no adjacent mines.</p></li><li><p>Implement right-mouse-click handling to flag/unflag cells.</p></li><li><p>Check for win/loss conditions and end the game with an appropriate win
or lose message. For this assignment, you don&rsquo;t have to start a new game
once a previous game ends (although you are welcome to do that if you
like).</p></li></ul><p><span style="font-weight: bold">Note:</span> To have enough information to handle left and right clicks, you will need
to override the <span class="emph">two</span>-argument form of <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">onMouseClicked</span><span class="RktMeta"></span></span></span>, that takes a
<span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Posn</span><span class="RktMeta"></span></span></span> for the mouse position, and a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjPrimType">String</span><span class="RktMeta"></span></span></span> describing which button
(<span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"LeftButton"</span><span class="RktMeta"></span></span></span>, <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"MiddleButton"</span><span class="RktMeta"></span></span></span>, <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"RightButton"</span><span class="RktMeta"></span></span></span> or
<span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"UnknownButton"</span><span class="RktMeta"></span></span></span>) was clicked.</p><h5><a name="(part._.Extra_credit)"></a>Extra credit</h5><p>If you would like to elaborate on this game for extra credit (only after having
already finished all of the specifications above) there are several
possibilities, in roughly increasing degrees of difficulty:</p><ul><li><p>Enhance the graphics to display how many mines remain to be
uncovered, or how many cells, or how many clicks, or &ldquo;keep score&rdquo; in some
fashion.</p></li><li><p>Restart the game with a new layout of mines after the game is
over.</p></li><li><p>Don&rsquo;t generate the mines until a player clicks, so it is
guaranteed the first click won&rsquo;t result in a game over.</p></li><li><p>Allow the player to select the game difficulty (board size
or number of mines) before playing.</p></li><li><p>Animate the flood fill effect so it happens over time instead
of instantly.</p></li><li><p>Generalize the connectivity of the game, and play minesweeper on a
hexagonal grid rather than a square grid. </p></li><li><p>Generalize the game to allow more than one mine per cell.
Generalize the graphics to display more than one mine, and allow the user to
right-click and guess how many mines are in a given cell.</p></li></ul><p>If you have other ideas for extra credit, please discuss them with me
firs, so we can agree on how feasible it is.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="assignment18.html" title="backward to &quot;Assignment 18: Streams&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="assignment19.html" title="forward to &quot;Assignment 19: Chess&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>