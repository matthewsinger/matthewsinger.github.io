<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Lecture 12: Structures</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="ps-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture11.html" title="backward to &quot;Lecture 11: big-bang&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture13.html" title="forward to &quot;Lecture 13: Nested Data&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._lecture12)"></a>Lecture 12: Structures</h3><p><span style="font-weight: bold">Motivation:</span> We want to define compound data.</p><p><span style="font-weight: bold">Topics to cover:</span> <span class="RktSym">define-struct</span>, struct definition vs. data definition, templates, functions</p><h4><a name="(part._g7466)"></a>Recap</h4><p>Any insights from the homework? What didn&rsquo;t people understand?</p><h4><a name="(part._g7467)"></a>Structures</h4><p>We all love movies. How would we represent a movie now? Just its title. But there is so much
more to know about a movie! Who has examples?</p><p>Run times, genres, language, year released, whether it&rsquo;s in black and white, etc.,
are all essential details! But we have no way to package them together. Let&rsquo;s change that.</p><p><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="stt"> </span><span class="RktSym">movie</span><span class="stt"> </span><span class="RktPn">[</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">genre</span><span class="stt"> </span><span class="RktSym">monochrome?</span><span class="stt"> </span><span class="RktSym">year</span><span class="RktPn">]</span><span class="RktPn">)</span></p><p>So what this did is give us a structure by which we can make movies. Let&rsquo;s try defining some examples</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Casablanca"</span><span class="hspace">&nbsp;</span><span class="RktVal">"drama"</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">1942</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Booksmart"</span><span class="hspace">&nbsp;</span><span class="RktVal">"comedy"</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">2019</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>So we can <span style="font-style: italic">make</span> movies. What happens when we run these in the interactions window?
We get the movie returned to us, because a <span class="RktSym">make-movie</span> is a value.</p><p><span style="font-weight: bold"><span style="color: red">This has huge implications.</span></span> We can now define our own value types!</p><p>But, like whenever we have a new tool, we have to use it intelligently. For example,
I could run <span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="stt"> </span><span class="RktVal">20</span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktVal">"dog"</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-1</span>2</span><span class="RktPn">)</span>, and what on earth would that mean?</p><p>So what we have to do is define a proper data definition for movies so we know
how to use this structure well.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A Movie is a (make-movie String String Boolean Number)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">genre</span><span class="hspace">&nbsp;</span><span class="RktSym">monochrome?</span><span class="hspace">&nbsp;</span><span class="RktSym">year</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a movie</span><span class="RktCmt">'</span><span class="RktCmt">s, name,</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">genre,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">whether it is black and white or color, and year of release</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Casablanca"</span><span class="hspace">&nbsp;</span><span class="RktVal">"drama"</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">1942</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Booksmart"</span><span class="hspace">&nbsp;</span><span class="RktVal">"comedy"</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">2019</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>We now know the types of data that make a movie and what each of the fields mean. While
the interpretation might seem like overkill, it won&rsquo;t be in other cases, especially
when dealing with units.</p><p>But now, of course, we need to write a template, which begs the question: how do we use
this data?</p><p>Once we define a structure, we define three types of functions: a constructor,
a predicate, and selectors. We&rsquo;ve already seen the constructor: it&rsquo;s <span class="RktSym">make-movie</span>.
The predicate defined is <span class="RktSym">movie?</span>, which asks if a value is a movie.
<span class="RktPn">(</span><span class="RktSym">movie?</span><span class="stt"> </span><span class="RktSym">casablanca</span><span class="RktPn">)</span> is <span class="RktVal">#t</span>, while <span class="RktPn">(</span><span class="RktSym">movie?</span><span class="stt"> </span><span class="RktVal">"dog"</span><span class="RktPn">)</span> is <span class="RktVal">#f</span>.</p><p>This leaves selectors. We get one for each of the fields. So we can call
<span class="RktPn">(</span><span class="RktSym">movie-name</span><span class="stt"> </span><span class="RktSym">casablanca</span><span class="RktPn">)</span>, <span class="RktPn">(</span><span class="RktSym">movie-genre</span><span class="stt"> </span><span class="RktSym">casablanca</span><span class="RktPn">)</span>
<span class="RktPn">(</span><span class="RktSym">movie-monochrome?</span><span class="stt"> </span><span class="RktSym">casablanca</span><span class="RktPn">)</span>, and <span class="RktPn">(</span><span class="RktSym">movie-year</span><span class="stt"> </span><span class="RktSym">casablanca</span><span class="RktPn">)</span>,
which will return the value stored in that field of the movie. These are how we use
a movie, and how we will define the template.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A Movie is a (make-movie String String Boolean Number)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">genre</span><span class="hspace">&nbsp;</span><span class="RktSym">monochrome?</span><span class="hspace">&nbsp;</span><span class="RktSym">year</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a movie</span><span class="RktCmt">'</span><span class="RktCmt">s, name,</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">genre,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">whether it is black and white or color, and year of release</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Casablanca"</span><span class="hspace">&nbsp;</span><span class="RktVal">"drama"</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">1942</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Booksmart"</span><span class="hspace">&nbsp;</span><span class="RktVal">"comedy"</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">2019</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">movie-temp : Movie -&gt; ?</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-temp</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-name</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-genre</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-monochrome?</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-year</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Let&rsquo;s see why this template is so useful by designing a function that says when a movie came out.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">movie-desc : Movie -&gt; String</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Describe a movie</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-desc</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-name</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">" came out in "</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-year</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-desc</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Casablanca came out in 1942"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-desc</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Booksmart came out in 2019"</span><span class="RktPn">)</span></td></tr></table></blockquote><p>And then, a function which determines if a movie is an old black and white film:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">old-black-and-white? : Movie -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Is this an old black and white movie?</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-desc</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">old-black-and-white?</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktVal">1950</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-year</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">old-black-and-white?</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">old-black-and-white?</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote><p>And let&rsquo;s say a movie that was in black and white was colorized. Let&rsquo;s design a function
that takes a movie and makes it a color film.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">colorized : Movie -&gt; Movie</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Turn the movie into a color film</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">colorized</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-name</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-genre</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">movie-year</span><span class="hspace">&nbsp;</span><span class="RktSym">movie</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">colorized</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">booksmart</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">colorized</span><span class="hspace">&nbsp;</span><span class="RktSym">casablanca</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-movie</span><span class="hspace">&nbsp;</span><span class="RktVal">"Casablanca"</span><span class="hspace">&nbsp;</span><span class="RktVal">"drama"</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">1942</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h4><a name="(part._g7468)"></a>Predicates in unions</h4><p>So where does that predicate come in?</p><p>Let&rsquo;s formulate another data definition, one that deals with measurements.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">meter</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">value</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">kilometer</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">value</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">centimeter</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">value</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A Distance is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-meter NNN)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-kilometer NNN)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-centimeter NNN)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a distance measured in either meters, kilometers, or centimeters</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">1m</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-meter</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">2km</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-kilometer</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">3cm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-centimeter</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">distance-temp : Distance -&gt; ?</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance-temp</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">meter?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">meter-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">kilometer?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">kilometer-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">centimeter?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">centimeter-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Let&rsquo;s formalize the questions for our template generation again:</p><p><div class="SIntrapara">For now, when writing a template, the three questions to ask yourself are
</div><div class="SIntrapara"><ol><li><p>How many cases of the data are there?</p></li><li><p>How do I tell them apart?</p></li><li><p>What data can I extract from each?</p></li></ol></div><div class="SIntrapara">Let&rsquo;s use this template in a function, which displays the measurement:</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">distance-&gt;string : Distance -&gt; String</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Show the distance</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">meter?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">meter-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"m"</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">kilometer?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">kilometer-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"km"</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">centimeter?</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">centimeter-value</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"cm"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">1m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"1m"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">2km</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"2km"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">3cm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"3cm"</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">So, again, what are the three steps to template generation?
</div><div class="SIntrapara"><ol><li><p>How many cases of the data are there?</p></li><li><p>How do I tell them apart?</p></li><li><p>What data can I extract from each?</p></li></ol></div></p><h4><a name="(part._g7469)"></a>Optional content if time allows</h4><p>If more is needed to fill lecture time, can show development of sum-distances,
first by normalizing to meters then adding. But meters isn&rsquo;t a proper data type.
How to resolve? Need more complex DD, with Meter as its own DD, being one branch of
Distance. Show DD, tease new templates, likely not enough time to implement code;
HW won&rsquo;t cover nested DDs.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture11.html" title="backward to &quot;Lecture 11: big-bang&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture13.html" title="forward to &quot;Lecture 13: Nested Data&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>