<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Lecture 3: Functions</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="ps-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture2.html" title="backward to &quot;Lecture 2: Images + Constants&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture4.html" title="forward to &quot;Lecture 4: Animate&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._lecture3)"></a>Lecture 3: Functions</h3><p><span style="font-weight: bold">Motivation:</span> We want to apply the same computation to various inputs</p><p><span style="font-weight: bold">Topics to cover:</span> Design recipe for functions (signatures, purpose statements, stub, tests, code)</p><h4><a name="(part._g7419)"></a>Recap</h4><p>Any insights from the homework? What didn&rsquo;t people understand?</p><h4><a name="(part._g7420)"></a>Letters</h4><p>Imagine a program which automates emails. Part of the program would have to be able to generate the header,
e.g. <span class="RktVal">"Dear Bob,"</span>. What part of that expression would change from one email to the next? The name.</p><p>So we want to be able to combine <span class="RktVal">"Dear "</span> and <span class="RktVal">","</span> with any name, easily. Do we have a
predefined function that generates a letter header? No! So we&rsquo;re going to make one ourselves.</p><p>Like constants, functions start with define, but the syntax is different. We put aleft paren after
define, followed by the function name, followed by the names of the arguments/parameters we give the function,
followed by a left paren.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>Here, <span class="RktSym">letter-head</span> is the name of the function, and <span class="RktSym">name</span> is the name of the
argument we&rsquo;re passing to the function (note we could call this anything, like <span class="RktSym">addressee</span>,
but <span class="RktSym">name</span> is short, sweet, and to the point).</p><p>We can now use that parameter inside the body of the function to generate a letter head.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Let&rsquo;s try using our function by pressing run and testing it out in the interactions window. Like constants,
once we run our program, we have access to it in the interactions window.</p><p>When we run our program, the function turns into "halloween code." What does it mean and how do we get it go
away?</p><p>It means that code hasn&rsquo;t actually been used, so we can get it to go away by using it in the interactions window.
Let&rsquo;s.</p><p><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="stt"> </span><span class="RktVal">"Bob"</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="stt"> </span><span class="RktVal">"Clarice"</span><span class="RktPn">)</span> both work as expected.</p><p>Note that a function has two parts: a header and a body. A function header consists of the name of the function
and the names of the parameters of the function. In this case, <span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="stt"> </span><span class="RktSym">name</span><span class="RktPn">)</span>.</p><p>The function body is everything after those. In this case, <span class="RktPn">(</span><span class="RktSym">string-append</span><span class="stt"> </span><span class="RktVal">"Dear "</span><span class="stt"> </span><span class="RktSym">name</span><span class="stt"> </span><span class="RktVal">","</span><span class="RktPn">)</span>.</p><p>Every function has one header and one body, and every function returns one value.</p><p>But what about <span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="stt"> </span><span class="RktVal">20</span><span class="RktPn">)</span>? What do you think will happen when we run this in the interactions
window? Let&rsquo;s try it.</p><h4><a name="(part._g7421)"></a>The Design Recipe For Functions</h4><p>This brings us to the systematic process for writing good, understandable, usable code
that we&rsquo;re going to expand upon and improve the entire year. It is called: The Design Recipe.
Repeat after me: in the design recipe we trust.</p><p>That&rsquo;s very trusting of you, seeing as you don&rsquo;t know what the design recipe is. Let&rsquo;s amend that.</p><p>To begin with, we went wrong because we passed <span class="RktSym">letter-head</span> the wrong kind of value.
It needs a string, but we gave it a number. We could deduce that from looking at the body
of the function, but that takes time, and while obvious here, won&rsquo;t always be. We need a systematic
way to tell ourselves and others how to use the functions we write.</p><h5><a name="(part._g7422)"></a>Signature</h5><p>The first step of the design recipe for functions is called a signature. In it, we describe
the types of arguments we can give the function, how many of them there are, and what
the output type is. Can anyone tell me the three types we&rsquo;ve learned about so far? (numbers, strings, images)</p><p>Signatures are single line comments that go above the function and have this format:</p><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">function-name : TypeOfArgument1 TypeOfArgument2 TypeOfArgument3... -&gt; OutputType</span></p></blockquote><p><div class="SIntrapara">So, what would it look like for <span class="RktSym">letter-head</span>?
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">letter-head : String -&gt; String</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Here, the output type matches the input type: that won&rsquo;t always be the case. Also,
note that function names and parameters are lower case, and types are upper case.</p><p>Let&rsquo;s try and derive the signature for <span class="RktSym">substring</span>. If <span class="RktPn">(</span><span class="RktSym">substring</span><span class="stt"> </span><span class="RktVal">"cat"</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>
is an example of its use and it returns <span class="RktVal">"a"</span>, what is its signature?</p><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">substring : String Number Number -&gt; String</span></p></blockquote><p>But can it be any number? No, it has to be a natural number (whole number &gt;= 0).</p><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">substring : String Nat Nat -&gt; String</span></p></blockquote><p>If we look in the docs, we see this is exactly how the input and output for substrings are described.</p><p>Besides Number, we can also describe proper subsets of numbers: Even, Rational (fractions), Real, etc.</p><p>But we&rsquo;re leaving something out, aren&rsquo;t we? It can&rsquo;t just be any numbers! It has to be numbers
within the length of the input string. But how would we express that as a type? Something like</p><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">substring : String NatThatIsWithinStringRange NatThatIsWithinStringRange -&gt; String</span></p></blockquote><p>This doesn&rsquo;t feel right. In fact, it&rsquo;s not. This isn&rsquo;t a proper type. Restrictions on data
input that are finer than types don&rsquo;t go in the signature, they go in the purpose statement.</p><h5><a name="(part._g7423)"></a>Purpose Statement</h5><p>Purpose statements are (almost always) one-line comments that tell people what a function does and any restrictions
that exist on the input. They should be short. Let&rsquo;s try it out for <span class="RktSym">substring</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">substring : String Nat Nat -&gt; String</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the part of the string between the first, smaller index (inclusive)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and second, larger index (exclusive); indices must not exceed string length</span></td></tr></table></blockquote><p>Here, it&rsquo;s two lines, but that makes sense given that we&rsquo;re
adding a restriction to the input and <span class="RktSym">substring</span> is fairly complex.
What happens when you violate that restriction or the signature? The function explodes.
When you put garbage in, you get garbage out.</p><p>Now, let&rsquo;s add a purpose statement to our <span class="RktSym">letter-head</span> function.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">letter-head : String -&gt; String</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Create a leader head addressed to name</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Notice that we used <span class="RktSym">name</span>, the parameter, in our purpose statement. This is a common
practice and often makes for crisp, clear purpose statements.</p><p>Now, how are we sure our function works? Well, we tried it out in the interactions window,
but there is a much better way to ensure functions behave well.</p><h5><a name="(part._g7424)"></a>Testing</h5><p><div class="SIntrapara">Writing proper tests for your code is the most secure way to ensure it does what you want it to,
and this stays true every time you run the code. To test our code, we&rsquo;re going to write
<span class="RktSym">check-expect</span>s. A <span class="RktSym">check-expect</span> takes two things: the expression we want to test, and
its expected result. These go below our function.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">letter-head : String -&gt; String</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Create a leader head addressed to name</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktVal">"Joe"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear Joe,"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letter-head</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dear Bob,"</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>How many tests are enough tests? There is no definitive answer, but "enough tests to convince
me it works" is a good general goal. As our functions get more complicated, we&rsquo;ll have a better
way to place a minimum on the number of tests we need. For now and always, though, our we should
have <span style="font-style: italic">no halloween code</span> when we run our definitions. If we do, we haven&rsquo;t written enough tests.</p><p>Sadly, there is almost never a clear maximum when it comes to testing!</p><h4><a name="(part._g7425)"></a>Algebra</h4><p>You&rsquo;ve likely heard the term "function" many times in math class before, and those
functions are no different from the functions you&rsquo;ll see here. For example, f(x) = 3x+2.</p><p>Let&rsquo;s convert this to a function in BSL, using the steps of the design recipe. We are going to
first write the signature and purpose statement and then a <span style="font-style: italic">stub</span>, which is a function
header and a body that is just a dummy value that matches the output type. For numbers, I often
use <span class="RktVal">0</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">f : Number -&gt; Number</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">3x+2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Next, we&rsquo;re going to add tests.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">f : Number -&gt; Number</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">3x+2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Then, finally, we&rsquo;re going to fill out the body of the function.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">f : Number -&gt; Number</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">3x+2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr></table></blockquote><p>While this may seem silly now, it is crucial to get into the habit of writing code this way
before our functions become very complex, where these techniques will be lifesaving.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture2.html" title="backward to &quot;Lecture 2: Images + Constants&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture4.html" title="forward to &quot;Lecture 4: Animate&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>