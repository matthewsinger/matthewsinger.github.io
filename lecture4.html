<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Lecture 4: Animate</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="ps-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture3.html" title="backward to &quot;Lecture 3: Functions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture5.html" title="forward to &quot;Lecture 5: Problem Solving&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._lecture4)"></a>Lecture 4: Animate</h3><p><span style="font-weight: bold">Motivation:</span> We want to write interesting programs now that we can design functions</p><p><span style="font-weight: bold">Topics to cover:</span> <span class="RktSym">animate</span>, <span class="RktSym">place-image</span></p><h4><a name="(part._g7426)"></a>Recap</h4><p>Any insights from the homework? What didn&rsquo;t people understand?</p><h4><a name="(part._g7427)"></a>Stepping through functions</h4><p>Something we didn&rsquo;t see yesterday is how the stepper interacts with functions and constants. Let&rsquo;s write
a small example, where we&rsquo;ll take how far someone wants to travel and use an average walking speed
to determine how long it will take them. Remember, we&rsquo;re going to use the design recipe for functions.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">AVG-WALKING-SPEED</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">in mph</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">MINUTES-PER-HOUR</span><span class="hspace">&nbsp;</span><span class="RktVal">60</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">time-to-travel : Number -&gt; Number</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Given the distance someone wants to travel in miles, output the avg amount of minutes it will take them</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-to-travel</span><span class="hspace">&nbsp;</span><span class="RktSym">miles</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">miles</span><span class="hspace">&nbsp;</span><span class="RktSym">AVG-WALKING-SPEED</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">MINUTES-PER-HOUR</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-to-travel</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">60</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-to-travel</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Now when we run the stepper, notice that the code it starts to run is that in the <span class="RktSym">check-expect</span>,
because functins don&rsquo;t run without being called. You&rsquo;ll also notice the first step is one of
<span style="font-style: italic">substitution</span>, where we replace the function call with the body of the function, and all of
the parameters replaced by the values the function was called on. Constants are also evaluated in their
own step, where they are replaced by the value they are defined as.</p><p>Also, notice that we included units in our purpose statement and as comments for constants when needed.
Units are essential to note when they are relevant, otherwise who knows what these numbers mean!</p><h4><a name="(part._g7428)"></a>Image functions</h4><p>Speaking of someone walking, let&rsquo;s try and represent that visually. We&rsquo;ll visually represent
a person as a red dot moving across a blue field. What should this animation look like?</p><p>(draw examples on board of progress)</p><p>What changes here? (x-coordinate of dot)</p><p>What stays the same?  (y-coordinate of dot, visual of dot, visual of bg, size of bg)</p><p>What changes will become parameters to our function, and what remains the same will be constants.</p><p>How will we actually write this function? Let&rsquo;s look at <span class="RktSym">place-image</span> in the docs (possibly again).
Notice that the 0, 0 coordinate is in the <span style="font-style: italic">top left</span>, not bottom left as we&rsquo;re used to in math
class. Computer graphics always have 0, 0 at the top left.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">300</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="hspace">&nbsp;</span><span class="RktVal">500</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rectangle</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">DOT</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">circle</span><span class="hspace">&nbsp;</span><span class="RktVal">30</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">place-dot-on-bg-at-x : Nat -&gt; Image</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Place DOT on BG at x</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-image</span><span class="hspace">&nbsp;</span><span class="RktSym">DOT</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktVal">30</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-image</span><span class="hspace">&nbsp;</span><span class="RktSym">DOT</span><span class="hspace">&nbsp;</span><span class="RktVal">30</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>As you&rsquo;ve noticed, writing check expects for functions that produce images is somewhat tedious,
and essentially involves copying the body of the function. Some data types, like images, aren&rsquo;t
easy to write down without using the functions that create them. With numbers, I can always write
<span class="RktVal">9</span> instead of <span class="RktPn">(</span><span class="RktSym">+</span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktVal">5</span><span class="RktPn">)</span>, but that&rsquo;s not the case here. We can be somewhat clever sometimes, though.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlay</span><span class="hspace">&nbsp;</span><span class="RktSym">DOT</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>If we check <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktVal">50</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktVal">100</span><span class="RktPn">)</span> in the interactions
window it seems to be doing what we want it to, but this isn&rsquo;t a very satisfying animation. Time for some magic.</p><h4><a name="(part._g7429)"></a>Animate</h4><p>As well as <span class="RktPn">(</span><span class="RktSym">require</span><span class="stt"> </span><span class="RktSym">2htdp/image</span><span class="RktPn">)</span>, we&rsquo;re also going to put <span class="RktPn">(</span><span class="RktSym">require</span><span class="stt"> </span><span class="RktSym">2htdp/universe</span><span class="RktPn">)</span> at the
top of our program and hit run. Then, in the interactions window,
we&rsquo;re going to type <span class="RktPn">(</span><span class="RktSym">animate</span><span class="stt"> </span><span class="RktSym">place-dot-on-bg-at-x</span><span class="RktPn">)</span>
and press enter.</p><p>Woaaah! Pretty neat, huh?</p><p>So what is <span class="RktSym">animate</span>, exactly? This is going to be one of the few pieces of "magic" we work with
this year, where even if we don&rsquo;t understand how it works, we have to know how to use it. As programmers
you will always be dealing with magical functions where even if you don&rsquo;t know how they work, you have
to know how to use them. Of course, the best programming is done when you understand how something works
and the magic is kept to a minimum, but sometimes you don&rsquo;t have much of a choice.</p><p>So <span class="RktSym">animate</span> is a magical function that takes the name of a function - note that other functions
can&rsquo;t do this - and runs an animation. Can anyone guess what the signature of the function it takes
has to be?</p><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">function-to-give-to-animate : Nat -&gt; Image</span></p></blockquote><p>It has to be a nat to image. <span class="RktSym">animate</span> works by drawing <span class="RktPn">(</span><span class="RktSym">function-to-give-to-animate</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span>,
then  <span class="RktPn">(</span><span class="RktSym">function-to-give-to-animate</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>, then  <span class="RktPn">(</span><span class="RktSym">function-to-give-to-animate</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>, etc.
until you exit the animation.</p><h4><a name="(part._g7430)"></a>Loop de Loop</h4><p>So our animation is pretty great, but our circle goes off screen by the end of it. Why is this?</p><p>Right, the x coordinate keeps growing bigger and bigger. If we run <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktSym">WIDTH</span><span class="RktPn">)</span>
or <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">+</span><span class="stt"> </span><span class="RktSym">WIDTH</span><span class="stt"> </span><span class="RktVal">200</span><span class="RktPn">)</span><span class="RktPn">)</span> the problem becomes apparent. So how do we fix this?
Well, let&rsquo;s think about the outcome we <span style="font-style: italic">want</span> to achieve.</p><p>Our animation works for small numbers, but fails for bigger ones. One solution is to have the circle loop
back around to the beginning. What would a good outcome be for <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktSym">WIDTH</span><span class="RktPn">)</span>, then?
Ideally, the same outcome as <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span>, and <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">+</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktSym">WIDTH</span><span class="RktPn">)</span><span class="RktPn">)</span>
would be the same as <span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>. Let&rsquo;s encode these with tests.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Notice how the way we phrase these tests communicates more information to the reader
than if we just wrote out what it would evaluate to. We should also update our purpose statement.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">place-dot-on-bg-at-x : Nat -&gt; Image</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Place DOT on BG at x, looping back around if x goes past WIDTH</span></td></tr></table></blockquote><p>So, how do we actually achieve this? What&rsquo;s actually changing? The x coordinate we place
<span class="RktSym">DOT</span> on. Let&rsquo;s draw a table of where we want it to go on the board. Remember,
<span class="RktSym">WIDTH</span> is 500.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Input:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">0 | 1 | 20 | 499 | 500 | 501 | 520 | 1020</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Desired-x: 0 | 1 | 20 | 499 | 0</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">| 1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">| 20</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">| 20</span></td></tr></table></blockquote><p>Does anyone know what math this is describing?</p><p>It&rsquo;s the remainder you get when you divide the input by 500, which is the <span class="RktSym">WIDTH</span>.</p><p>As it turns out, <span class="RktSym">remainder</span> is a function in BSL. Let&rsquo;s test it out in the interactions window.</p><p>So, now that we&rsquo;ve expereminted a bit with <span class="RktSym">remainder</span>, how do we use it in our function?</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">place-dot-on-bg-at-x : Nat -&gt; Image</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Place DOT on BG at x</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-dot-on-bg-at-x</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-image</span><span class="hspace">&nbsp;</span><span class="RktSym">DOT</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">remainder</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Let&rsquo;s confirm this works by running <span class="RktPn">(</span><span class="RktSym">animate</span><span class="stt"> </span><span class="RktSym">place-dot-on-bg-at-x</span><span class="RktPn">)</span> again.</p><h4><a name="(part._g7431)"></a>If time permits</h4><p>If time permits, show how to animate the dot moving vertically, the dot moving vertically but from down to up
instead of up to down, how to make the animation twice as fast.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="lecture3.html" title="backward to &quot;Lecture 3: Functions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Lectures.html" title="up to &quot;II Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lecture5.html" title="forward to &quot;Lecture 5: Problem Solving&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>