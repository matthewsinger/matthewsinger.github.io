<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Structures</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps11big-bang.html" title="backward to &quot;big-bang&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps13Nested_Data.html" title="forward to &quot;Nested Data&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._ps12.Structures)"></a>Structures</h3><p><span style="font-weight: bold">Programming Language</span>  <a href="https://docs.racket-lang.org/htdp-langs/beginner.html?q=%2B">BSL</a></p><p><span style="font-weight: bold">Purpose</span> Design functions with structures.</p><p><span style="font-weight: bold">Setup</span> Once the following has been run:</p><p><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="stt"> </span><span class="RktSym">foo</span><span class="stt"> </span><span class="RktPn">[</span><span class="RktSym">a</span><span class="stt"> </span><span class="RktSym">b</span><span class="stt"> </span><span class="RktSym">c</span><span class="RktPn">]</span><span class="RktPn">)</span></p><p>Three types of functions are created that you can use:</p><p>The <span style="font-weight: bold">constructor</span>: <span class="RktSym">make-foo</span></p><p>The <span style="font-weight: bold">predicate</span>: <span class="RktSym">foo?</span></p><p>The <span style="font-weight: bold">selectors</span>: <span class="RktSym">foo-a</span>, <span class="RktSym">foo-b</span>, and <span class="RktSym">foo-c</span></p><p>Templates which process structures should identify structures with the predicate
(if there is more than one case to the data definition), and then enumerate
all of the structure&rsquo;s fields with selectors.</p><p><span style="font-weight: bold">Exercises</span></p><blockquote><p><div class="SIntrapara"><span class="exercise"><span style="font-weight: bold">Exercise 1 </span></span>Consider the following structure and data definition:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._fish)"></a><span style="font-style: italic">Fish</span><span class="RktCmt"> is a (make-fish String String NNN)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">fish</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">species</span><span class="hspace">&nbsp;</span><span class="RktSym">color</span><span class="hspace">&nbsp;</span><span class="RktSym">weight</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a fish</span><span class="RktCmt">'</span><span class="RktCmt">s species, color, and weight in ounces</span></td></tr></table></blockquote></div><div class="SIntrapara"><ol><li><p>Define some examples of <a href="#%28tech._fish%29" class="techoutside" data-pltdoc="x"><span class="techinside">Fish</span></a>.</p></li><li><p>Design the template for functions that consume a <a href="#%28tech._fish%29" class="techoutside" data-pltdoc="x"><span class="techinside">Fish</span></a>.</p></li><li><p>List all of the signatures of all of the functions that are defined by
this structure and data defintion.</p><p><div class="SIntrapara"><span style="font-weight: bold">Caveat:</span> one could write the technically
correct signature for <span class="RktSym">make-fish</span> as:
   </div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">make-fish : Any Any Any -&gt; (make-fish Any Any Any)</span></p></blockquote></div></p><p>This does describe a proper data type in both the inputs and output. However,
as discussed in class, just because we could write something like
<span class="RktPn">(</span><span class="RktSym">make-fish</span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktVal">42</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">bark</span><span class="RktPn">)</span> doesn&rsquo;t mean we should. Instead,
we should think of the signature of <span class="RktSym">make-fish</span> in so far as it
relates to the data type of <a href="#%28tech._fish%29" class="techoutside" data-pltdoc="x"><span class="techinside">Fish</span></a>.</p></li></ol></div></p></blockquote><blockquote><p><div class="SIntrapara"><span class="exercise"><span style="font-weight: bold">Exercise 2 </span></span>Imagine a program in which users can type (DrRacket, for example, is one such program).
</div><div class="SIntrapara"><ol><li><p>Design a structure-based data definition which keeps track of two strings, which are meant to represent
the content before and after the cursor.</p></li><li><p>Use that definition to define a function <span class="RktSym">type</span>, which takes in that kind of data
and a string, and appends that string to the end of the content before the cursor.</p></li><li><p>Use that definition to define a function <span class="RktSym">left</span>, which takes in that kind of data
and moves the last character in the string before the cursor to the beginning of the string
after the cursor (if that character exists). This is to replicate the user pressing the left arrow key.</p></li></ol></div></p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 3 </span></span>Design the function <span class="RktSym">reflexes</span> which shows a red screen for <span class="RktVal">140</span> ticks
and then shows a blue screen for <span class="RktVal">14</span> ticks (at the default rate of 28 ticks per second).
This should repeat until the user ends the program.</p><p>The input to <span class="RktSym">reflexes</span> can be ignored (and given the Any type), but the output should
be a boolean indicating whether or not the user exited the program during a blue screen.</p><p><div class="SIntrapara">Use the following data definition to help you:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._reflexgamestate)"></a><span style="font-style: italic">ReflexGameState</span><span class="RktCmt"> is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-red Nat)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ticks-left</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-blue Nat)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blue</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ticks-left</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents the current state of the game, either red or blue,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and how many ticks are left to show in that state before switching</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">to the other</span></td></tr></table></blockquote></div></p><p><span style="font-weight: bold">Hint:</span> one of the reasons to wrap <span class="RktSym">big-bang</span> programs in
a main function is so that the output of <span class="RktSym">big-bang</span> can
easily be used. Remember that <span class="RktSym">big-bang</span> is an expression
whose evaluation can be passed to a function like any other,
and that the main function&rsquo;s body doesn&rsquo;t have to start with
a call to <span class="RktSym">big-bang</span>.</p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps11big-bang.html" title="backward to &quot;big-bang&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps13Nested_Data.html" title="forward to &quot;Nested Data&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>