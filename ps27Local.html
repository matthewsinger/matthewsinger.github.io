<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Local</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps26Pre-defined_Abstractions.html" title="backward to &quot;Pre-defined Abstractions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps28Gaming.html" title="forward to &quot;Gaming&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._ps27.Local)"></a>Local</h3><p><span style="font-weight: bold">Programming Language</span>  <a href="https://docs.racket-lang.org/htdp-langs/intermediate.html?q=%2B">ISL</a></p><p><span style="font-weight: bold">Purpose</span> Solve more interesting problems with pre-defined abstractions and <span class="RktSym">local</span></p><p><div class="SIntrapara"><span style="font-weight: bold">Setup</span> Recall our new abstraction:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">build-list : (X) Nat [Nat -&gt; X] -&gt; [List-of X]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">produce a list by applying the function to 0 up through the given number (exclusive)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Recall the syntax for local:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">local</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">definition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">definition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">definition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">expression</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Where a definition is either a constant, function, or structure definition.
Be sure to give local functions a signature and purpose statement, and to only write
simple functions since they can&rsquo;t be properly tested.</p><p><span style="font-weight: bold">Exercises</span></p><p>As per last week, and from here on in, be sure to use pre-defined abstractions
when appropriate.</p><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 1 </span></span>Design a function that given a list of strings
returns the same list but with two copies (next to each other in the list, as seperate strings) of all
 strings with an even <span class="RktSym">string-length</span>.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 2 </span></span>Design a function <span class="RktSym">scalar-matrix</span> which given a natural number <span class="RktSym">n</span>
and a number <span class="RktSym">k</span>, outputs an nxn matrix where the diagonal
(first element of the first row, second element of the second row... nth element of the nth row)
entries are <span class="RktSym">k</span> and the other elements are <span class="RktVal">0</span>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>A matrix is a list of list of numbers. An nxn (pronounced "n by n") matrix is one where
the outer list is of <span class="RktSym">length</span> n, and so are all the entries of that list.</p></blockquote></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._network)"></a><span style="font-style: italic">Network</span><span class="RktCmt"> is a [List-of </span><a href="#%28tech._person11%29" class="techoutside" data-pltdoc="x"><span class="techinside">Person</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._person11)"></a><span style="font-style: italic">Person</span><span class="RktCmt"> is a (make-person String </span><a href="#%28tech._console%29" class="techoutside" data-pltdoc="x"><span class="techinside">Console</span></a><span class="RktCmt"> [List-of String])</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">person</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">console</span><span class="hspace">&nbsp;</span><span class="RktSym">friends</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents their name, their type of console, and the name of their friends</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">assume all of the names in the network are unique, and that the names of friends are unique</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represent actual people in the network</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._console)"></a><span style="font-style: italic">Console</span><span class="RktCmt"> is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- "xbox"</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- "ps4"</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">NETWORK</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Alice"</span><span class="hspace">&nbsp;</span><span class="RktVal">"xbox"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Heidi"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ps4"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"xbox"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Alice"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ps4"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Eric"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Frank"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Grace"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Eric"</span><span class="hspace">&nbsp;</span><span class="RktVal">"xbox"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Alice"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Frank"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Grace"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Frank"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ps4"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Alice"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Grace"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Grace"</span><span class="hspace">&nbsp;</span><span class="RktVal">"xbox"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Frank"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Heidi"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ps4"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Alice"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Eric"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Grace"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">get-person : Network String -&gt; Person</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Get the person in the network (assume they are there)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-person</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">string=?</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">person-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-person</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rest</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-person</span><span class="hspace">&nbsp;</span><span class="RktSym">NETWORK</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-person</span><span class="hspace">&nbsp;</span><span class="RktVal">"Bob"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ps4"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"Carol"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Dan"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 3 </span></span>Design the function <span class="RktSym">update-network</span> which takes a <a href="#%28tech._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">Network</span></a> and updates
every individual&rsquo;s console to become the console the majority of their friends have. If there is no
majority amongst their friends (a tie), then their console is unchanged. Note that this update is
<span style="font-style: italic">atomic</span> which means everyone&rsquo;s console updates at once based only on the previous
network&rsquo;s state. In other words, where someone appears in the network should have
no effect on the update process.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 4 </span></span>Design the function <span class="RktSym">bubbled?</span> which determines if a person (given to the function
as just their name) is only friends with people who have their same console.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 5 </span></span>Design the function <span class="RktSym">bubble</span> which removes everyone from a given <a href="#%28tech._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">Network</span></a>
who does not have a given <a href="#%28tech._console%29" class="techoutside" data-pltdoc="x"><span class="techinside">Console</span></a>. Be sure to update people&rsquo;s friends as needed.</p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps26Pre-defined_Abstractions.html" title="backward to &quot;Pre-defined Abstractions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps28Gaming.html" title="forward to &quot;Gaming&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>