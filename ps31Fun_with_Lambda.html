<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Fun with Lambda</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps30Lambda.html" title="backward to &quot;Lambda&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps32Repeaters.html" title="forward to &quot;Repeaters&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._ps31.Fun._with._.Lambda)"></a>Fun with Lambda</h3><p><span style="font-weight: bold">Programming Language</span>  <a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html?q=%2B">ISL+</a></p><p><span style="font-weight: bold">Purpose</span> Have some fun with <span class="RktSym">&#955;</span>, and demonstrate how using functions as data
creates for easily flexible programs.</p><p><span style="font-weight: bold">Setup</span> N/A</p><p><span style="font-weight: bold">Exercises</span></p><p>In this homework, you will design a game in which you can create many balls which move across the screen in various ways.
The player can add new balls by clicking on the screen.</p><p>Below is the data definition for a <a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._lam._ball)"></a><span style="font-style: italic">Ball</span><span class="RktCmt"> is a (make-ball Nat </span><a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">Mode</span></a><span class="RktCmt"> Color [Nat -&gt; Posn])</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">ball</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">mode</span><span class="hspace">&nbsp;</span><span class="RktSym">color</span><span class="hspace">&nbsp;</span><span class="RktSym">placement</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- r is the ball</span><span class="RktCmt">'</span><span class="RktCmt">s radius</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- mode is the ball</span><span class="RktCmt">'</span><span class="RktCmt">s mode</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- color is the ball</span><span class="RktCmt">'</span><span class="RktCmt">s color</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- placement is a function that, </span><span style="font-weight: bold">given the current time,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">outputs a new coordinate for the ball to be drawn at</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._mode)"></a><span style="font-style: italic">Mode</span><span class="RktCmt"> is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- "solid"</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- "outline"</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ball1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-posn</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ball2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-posn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>And here is the definition of the world state, graphical constants, and the <span class="RktSym">main</span>
function:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._ballworld)"></a><span style="font-style: italic">BallWorld</span><span class="RktCmt"> is a (make-ball-world Nat [List-of </span><a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a><span class="RktCmt">])</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">ball-world</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">balls</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- where t is the amount of time that has passed</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- and balls is the balls of the world</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">world1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball-world</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">world2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball-world</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">ball1</span><span class="hspace">&nbsp;</span><span class="RktSym">ball2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="hspace">&nbsp;</span><span class="RktVal">500</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="hspace">&nbsp;</span><span class="RktVal">500</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-scene</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="hspace">&nbsp;</span><span class="RktSym">HEIGHT</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">main : [List-of </span><a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a><span class="RktCmt">] -&gt; World</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Run the game with this list of initial balls</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main</span><span class="hspace">&nbsp;</span><span class="RktSym">init-list</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">big-bang</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball-world</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">init-list</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">on-tick</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bw</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ball-world</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ball-world-t</span><span class="hspace">&nbsp;</span><span class="RktSym">bw</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ball-world-balls</span><span class="hspace">&nbsp;</span><span class="RktSym">bw</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">to-draw</span><span class="hspace">&nbsp;</span><span class="RktSym">draw</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">on-mouse</span><span class="hspace">&nbsp;</span><span class="RktSym">place-ball</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 1 </span></span>Design the function <span class="RktSym">draw-ball</span> that given a <a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a>,
a Posn, and an image, draws the ball at that point on that image.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 2 </span></span>Design the function <span class="RktSym">make-drawer</span> that given a time will create a
 function that takes a <a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a> and an image and will draw it.
<span style="font-weight: bold">Hint:</span> Use <span class="RktSym">draw-ball</span>.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 3 </span></span>Design the function <span class="RktSym">draw</span> that draws the ball world. Look at the helpers
you&#8217;ve just written: especially the signature for <span class="RktSym">make-drawer</span>. What does it remind you of?
How can you use that to help you?</p></blockquote><p><div class="SIntrapara">We want to be able to add new balls when the user clicks the screen. Here are some data definitions
that will help us:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._ballgenerator)"></a><span style="font-style: italic">BallGenerator</span><span class="RktCmt"> is a [Nat Nat Nat -&gt; [Nat -&gt; Posn]]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Given the time, x-coordinate, and y-coordinate of when and where a</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ball is created, create a function that, given the current time of</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the world, will output a Posn</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Example:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">move-horizontally : </span><a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-horizontally</span><span class="hspace">&nbsp;</span><span class="RktSym">t0</span><span class="hspace">&nbsp;</span><span class="RktSym">x0</span><span class="hspace">&nbsp;</span><span class="RktSym">y0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-posn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">modulo</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">t0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">WIDTH</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">y0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">check-expect</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">move-horizontally</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">7 seconds have passed</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-posn</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 4 </span></span>Design the <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a> <span class="RktSym">move-vertically</span>.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 5 </span></span>Create a constant <span class="RktSym">GENERATORS</span>, which is a
<span class="RktPn">[</span><span class="RktSym">List-of</span><span class="stt"> </span><a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a><span class="RktPn">]</span> that will keep track of all the <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a>s
you&#8217;ve made thusfar.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 6 </span></span>Design the function <span class="RktSym">place-ball</span>, the <span class="RktSym">on-mouse</span> handler.
When a player clicks, it should add a new ball to the world.
Feel free to use any radius, color, and mode you like.</p><p>As far as the ball&#8217;s placement: look at the data definition of a <a href="#%28tech._lam._ball%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ball</span></a>,
the signature of <span class="RktSym">place-ball</span>, and the data definition of a <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a>. Feel free to use
any <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a> you like, but be sure to use it correctly.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 7 </span></span>Now for some fun: design a function <span class="RktSym">select-random</span>, that
given any non-empty list will select a random element from the list.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 8 </span></span>Update <span class="RktSym">place-ball</span> to select a random <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a> from
the <span class="RktSym">GENERATORS</span> you previously defined.</p></blockquote><p>The following exercises are all optional:</p><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 9 </span></span>Update <span class="RktSym">place-ball</span> to make a radius of random, non-zero size.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 10 </span></span>Update <span class="RktSym">place-ball</span> to use a random <span class="RktSym">make-color</span> (look this
function up in the docs if it is unfamiliar to you).</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 11 </span></span>Update <span class="RktSym">place-ball</span> by changing <span class="RktVal">"button-down"</span> to <span class="RktVal">"drag"</span>.</p></blockquote><blockquote><p><span class="exercise"><span style="font-weight: bold">Exercise 12 </span></span>Extend <span class="RktSym">GENERATORS</span> with as many <a href="#%28tech._ballgenerator%29" class="techoutside" data-pltdoc="x"><span class="techinside">BallGenerator</span></a>s as you like!</p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps30Lambda.html" title="backward to &quot;Lambda&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps32Repeaters.html" title="forward to &quot;Repeaters&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>