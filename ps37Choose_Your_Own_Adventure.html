<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Choose Your Own Adventure</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="extra-scripts.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.3</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps36Mutually_Recursive_Data.html" title="backward to &quot;Mutually Recursive Data&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps38Path_Finding.html" title="forward to &quot;Path Finding&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._ps37.Choose._.Your._.Own._.Adventure)"></a>Choose Your Own Adventure</h3><p><span style="font-weight: bold">Programming Language</span>  <a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html?q=%2B">ISL+</a></p><p><span style="font-weight: bold">Purpose</span> To design a fun program with mutually recursive data.</p><p><span style="font-weight: bold">Setup</span> N/A</p><p><span style="font-weight: bold">Exercises</span></p><blockquote><p><div class="SIntrapara"><span class="exercise"><span style="font-weight: bold">Exercise 1 </span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._section)"></a><span style="font-style: italic">Section</span><span class="RktCmt"> is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- </span><a href="#%28tech._ending%29" class="techoutside" data-pltdoc="x"><span class="techinside">Ending</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- </span><a href="#%28tech._chapter%29" class="techoutside" data-pltdoc="x"><span class="techinside">Chapter</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a section in a choose your own adventure book</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._ending)"></a><span style="font-style: italic">Ending</span><span class="RktCmt"> is a (make-ending String Boolean)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">ending</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktSym">good?</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents an ending to the story with some text and whether it was a good ending</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._chapter)"></a><span style="font-style: italic">Chapter</span><span class="RktCmt"> is a (make-chapter String [</span><a href="#%28tech._nelist._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">NEList-of</span></a><span class="RktCmt"> </span><a href="#%28tech._choice%29" class="techoutside" data-pltdoc="x"><span class="techinside">Choice</span></a><span class="RktCmt">])</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">chapter</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktSym">choices</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents a chapter in a choose-your-own adventure book with a body</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and a list of choices at the end</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An [</span><a name="(tech._nelist._of)"></a><span style="font-style: italic">NEList-of</span><span class="RktCmt"> X] (Non-Empty List) is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (cons X </span><span class="RktCmt">'</span><span class="RktCmt">())</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (cons X [</span><a href="#%28tech._nelist._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">NEList-of</span></a><span class="RktCmt"> X])</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._choice)"></a><span style="font-style: italic">Choice</span><span class="RktCmt"> is a a (make-choice String </span><a href="#%28tech._section%29" class="techoutside" data-pltdoc="x"><span class="techinside">Section</span></a><span class="RktCmt">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">choice</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and represents the blurb shown to the reader and the resulting section if that is the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">choice they make</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">breakfast-story</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-chapter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"It's time for breakfast. What do you choose?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-choice</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Oatmeal."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ending</span><span class="hspace">&nbsp;</span><span class="RktVal">"You don't have any oatmeal."</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-choice</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Cereal."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-chapter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Good choice. Do you take the subway or bike to school?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-choice</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Subway."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ending</span><span class="hspace">&nbsp;</span><span class="RktVal">"The subway is cancelled."</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-choice</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Bike."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ending</span><span class="hspace">&nbsp;</span><span class="RktVal">"You spot a rare bird and your video of it goes viral. Congrats!"</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-choice</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Nothing."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-ending</span><span class="hspace">&nbsp;</span><span class="RktVal">"You're hangry all day."</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Design a <span class="RktSym">big-bang</span> program which takes in a <a href="#%28tech._section%29" class="techoutside" data-pltdoc="x"><span class="techinside">Section</span></a> and allows the player
to move through the story.</div></p><p>For chapters, it shows the player the text of the section, and beneath it, a list of the choices
they have. The player can use the arrow keys (up/down) to tab through the choices available and then
use enter (<span class="RktSym">KeyEvent</span> <span class="RktVal">"\r"</span>) to move on to the selected result. There should be
some clear visual indication of which choice the player would make upon pressing enter.</p><p>Be sure to handle up/down arrow keys at the beginning/end of the list of choices carefully.</p><p>The game is over when the player reaches an ending. The program should display the text of the
ending in blue if it is a good ending and red if it is not. The program should output the
text of the last section shown when the game ends or when the user exits.
Be sure to provide your <span class="RktSym">stop-when</span> clause your drawing function as a second argument so
the ending is displayed when the program stops.</p><p>Have fun writing an interesting story or two! I look forward to playing them.</p><p><span style="font-weight: bold">Hint:</span> while your world state needs to contain a <a href="#%28tech._section%29" class="techoutside" data-pltdoc="x"><span class="techinside">Section</span></a>, it also needs to keep
track of what choice the user is currently selecting somehow.</p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="ps36Mutually_Recursive_Data.html" title="backward to &quot;Mutually Recursive Data&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Problem_Sets.html" title="up to &quot;I Problem Sets&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps38Path_Finding.html" title="forward to &quot;Path Finding&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>